
# Main task: #

* 


# 已完成 #

* 按主题的分区数量， 以及在线BLE的数量， 平均向各BLE分配启动分区（初始化的分区启动）
* 按一致性hash计算， 对 SEND_COMMIT 的消息进行分区分配
* 消息的消费过程， 在broker中实现遍历分区， 完成全部消息的消费
* 通过PULL消息的应答， broker从BLE更新对应分区状态
* broker中分区排序


# 未完成 #

- 在线增加/减少分区
- 索引保存到数据库
- 消息体保存到数据库
- 主题相关配置数据读取， 从原有版本中的代码继承过来
- BLE故障down掉后， 由supervisor 在其它BLE上启动失效的分区
- BLE故障down掉后， broker的分区状态更新
- supervisor down掉后重启时的状态恢复
- 监控数据采集接口


# 待定问题 #

- 消费顺序控制是否保留在核心模块里？ 暂时建议不保留， 生产环境中根本没用
- 消费回执, 现在已经在消费确认报文中增加了 reply-to 的模式来简化, 暂时不需要额外的处理
- 新增分区时, 新joining及受影响joining分区的创建
以及受影响分区改为leaving状态得同时生效, how?  同时有生产者的broker间一定做不到同时更新到这个状态, 这个时间差可能造成什么影响?(没有及时更新到的话,发送的请求会被拒绝,进而向客户端报错)